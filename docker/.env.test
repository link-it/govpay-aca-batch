##############################################################################
# GovPay A.C.A. - Environment Configuration (govpay-docker compatible)
# Copy this file to .env and customize: cp .env.template .env
##############################################################################

##############################################################################
# Docker Image
##############################################################################
GOVPAY_ACA_IMAGE=linkitaly/govpay-aca:1.1.3

##############################################################################
# Database Configuration (govpay-docker compatible naming)
##############################################################################

# Database type: postgresql, mysql, mariadb, oracle
GOVPAY_DB_TYPE=postgresql

# Database server (format: host:port or just host)
GOVPAY_DB_SERVER=postgres:5432

# Database name
GOVPAY_DB_NAME=govpay

# Database credentials
GOVPAY_DB_USER=govpay
GOVPAY_DB_PASSWORD=govpay_test_2024

# Optional: Additional JDBC connection parameters
# GOVPAY_DS_CONN_PARAM=useSSL=false&serverTimezone=UTC

# Optional: Oracle-specific (servicename or sid)
# GOVPAY_ORACLE_JDBC_URL_TYPE=servicename

##############################################################################
# Connection Pool (ACA-specific namespace)
##############################################################################

GOVPAY_ACA_MIN_POOL=2
GOVPAY_ACA_MAX_POOL=10
GOVPAY_ACA_DS_BLOCKING_TIMEOUT=30000
GOVPAY_ACA_DS_PSCACHESIZE=100

##############################################################################
# Database Initialization
##############################################################################

# Skip database population (set to FALSE for first run)
GOVPAY_ACA_POP_DB_SKIP=FALSE

# Table to check for initialization
GOVPAY_ACA_DB_CHECK_TABLE=aca_posizioni_pendenti

# Liveness check settings
GOVPAY_ACA_LIVE_DB_CHECK_SKIP=FALSE
GOVPAY_ACA_LIVE_DB_CHECK_MAX_RETRY=30

# Readiness check settings
GOVPAY_ACA_READY_DB_CHECK_SKIP=FALSE
GOVPAY_ACA_READY_DB_CHECK_MAX_RETRY=5

##############################################################################
# pagoPA GPD Configuration
##############################################################################

# GPD Service URL (REQUIRED)
# Production: https://api.platform.pagopa.it/gpd/api/v1
# UAT: https://api.uat.platform.pagopa.it/gpd/api/v1
GPD_BASE_URL=https://api.uat.platform.pagopa.it/gpd/api/v1

# GPD Subscription Key (REQUIRED)
GPD_SUBSCRIPTION_KEY=test_key_for_testing_only

# Retry policy for 403 errors
RETRY_403_ENABLED=false

##############################################################################
# GDE Integration (Optional)
##############################################################################

# Enable GDE event logging
GDE_ENABLED=false

# GDE Service URL (required if GDE_ENABLED=true)
# GDE_BASE_URL=http://govpay-gde-api:8080

##############################################################################
# Cluster Configuration
##############################################################################

# Cluster identifier (defaults to hostname if not set)
CLUSTER_ID=govpay-aca-01

##############################################################################
# Scheduler Configuration (Systemd Mode)
##############################################################################

# Actuator endpoint port
ACTUATOR_PORT=8081

# Scheduler interval in milliseconds (default: 5 minutes)
SCHEDULER_INTERVAL_MS=300000

##############################################################################
# Java Memory Configuration
##############################################################################

JAVA_MIN_HEAP=256m
JAVA_MAX_HEAP=1024m

##############################################################################
# Debug
##############################################################################

DEBUG=false

##############################################################################
# Notes
##############################################################################
#
# FIRST RUN: Set GOVPAY_ACA_POP_DB_SKIP=FALSE to initialize database
# SUBSEQUENT RUNS: Set GOVPAY_ACA_POP_DB_SKIP=TRUE to skip initialization
#
# JDBC DRIVERS: Place driver JARs in ./jdbc-drivers/ directory
#   - PostgreSQL: postgresql-42.7.3.jar
#   - MySQL/MariaDB: mariadb-java-client-3.3.3.jar
#   - Oracle: ojdbc11-23.3.0.23.09.jar
#
# See jdbc-drivers/README.md for download links
##############################################################################
